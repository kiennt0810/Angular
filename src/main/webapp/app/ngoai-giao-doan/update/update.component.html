<div style="background-color: white;">
  <div *ngIf="TkForm">
    <form name="editForm" (ngSubmit)="createDV()" action="" style="background-color: white;" [formGroup]="editForm">
      <div class="me-3 ms-3">
        <br>
        <div class="row">
          <div class="col-12">
            <div class="row">
              <div class="col-2">
                <h6 class="pt-1">Tên hoạt động&nbsp;<span style="color: red;">*</span></h6>
              </div>
              <div class="col-10">
                <div class="col d-flex justify-content-start">
                  <input class="form-control" type="text" name="tenHD" formControlName="tenHD" id="tenHD" />
                </div>
                <div
                  *ngIf="editForm.get('tenHD')!.invalid && (editForm.get('tenHD')!.dirty || editForm.get('tenHD')!.touched)">

                  <small class="form-text text-danger" *ngIf="editForm.get('tenHD')?.errors?.required">
                    Trường này không được để trống.
                  </small>
                </div>
              </div>
            </div>
            <div class="row pt-3">
              <div class="col-2">
                <h6 class="pt-1">Cơ quan đại diện</h6>
              </div>
              <div class="col-10">
                <div class="col d-flex justify-content-start"><input class="form-control" type="text" name="coQuan"
                  formControlName="coQuan" /></div>
              </div>
            </div>
            <div class="row pt-3">
              <div class="col-2">
                <h6 class="pt-1">Quốc gia</h6>
              </div>
              <div class="col-10">
                <div class="input-group">
                  <select class="form-select" style="background-color: #fff" name="quocGia" formControlName="quocGia">
                    <option [value]=null selected>Chọn</option>
                    <option *ngFor="let item of quocGia" [value]="item.ten">{{ item.ten }}</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row pt-3">
              <div class="col-2">
                <h6 class="pt-1">Hình thức</h6>
              </div>
              <div class="col-10">
                <div class="col d-flex justify-content-start"><input class="form-control" type="text" name="hinhThuc"
                  formControlName="hinhThuc" /></div>
              </div>
            </div>
            <div class="row pt-3">
              <div class="col-2">
                <h6>Tặng phẩm</h6>
              </div>
              <div class="col-10">
                <div *ngFor="let d of tangPham">
                  <p>
                    <input type="checkbox" [checked]="d.checked" (change)="d.checked = !d.checked"
                      [attr.disabled]="disableTextbox? true : null" />
                    &nbsp;{{ d.name }}
                  </p>
                  <div class="col d-flex justify-content-start" *ngIf="tangPhamKhac && d.name == 'Khác'">
                    <textarea class="form-control" id="tangPham" type="text" [value]="dataTangPham"></textarea>
                  </div>
                </div>
                <pre style="display: none;">{{this.result | json}}</pre>
              </div>
            </div>
            <div class="row pt-3">
              <div class="col-2">
                <h6 class="pt-1">Thời gian&nbsp;<span style="color: red;" class="pt-2">*</span></h6>
              </div>
              <div class="col-10">
                <div class="input-group">
                  <input class="form-control" type="text" placeholder="dd/mm/yyyy" bsDatepicker
                    [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY',showWeekNumbers: false }" name="thoiGian"
                    formControlName="thoiGian" id="thoiGian" (change)="isInvalidDate($event)"/>
                </div>
                <div
                  *ngIf="editForm.get('thoiGian')!.invalid && (editForm.get('thoiGian')!.dirty || editForm.get('thoiGian')!.touched)">
                  <small class="form-text text-danger" *ngIf="editForm.get('thoiGian')?.errors?.required">
                    Trường này không được để trống.
                  </small>
                </div>
              </div>
            </div>
            <div class="row pt-3">
              <div class="col-2">
                <h6 class="pt-1">Địa điểm</h6>
              </div>
              <div class="col-10">
                <div class="col d-flex justify-content-start"><input class="form-control" type="text" name="diaDiem"
                  formControlName="diaDiem" /></div>
              </div>
            </div>
            <div class="row pt-3">
              <div class="col-2">
                <h6 class="pt-1">Ghi chú</h6>
              </div>
              <div class="col-10">
                <div class="col d-flex justify-content-start"><textarea class="form-control" type="text" name="ghiChu"
                  formControlName="ghiChu"></textarea></div>
              </div>
            </div>
            <div class="row pt-3">
              <div class="col-2">
                <h6>Hồ sơ đính kèm</h6>
              </div>
              <div class="col-10 custom-file-button">
                <table class="table table-bordered">
                  <thead style="background-color: #1A4792; color: white;">
                    <tr>
                      <th class="text-center">STT</th>
                      <th class="text-center col-10">Tên file</th>
                      <th class="text-center">Thao tác</th>
                    </tr>
                  </thead>
                  <tbody formArrayName="listHDDtlFileVM">
                    <tr *ngFor="let d of listFileControls let i = index" [formGroupName]="i">
                      <td class="text-center align-middle" style="font-weight: bold;">{{listFileControls.indexOf(d)+1}}
                      </td>
                      <td><input readonly type="text" class="form-control" name="fileName" formControlName="fileName"></td>
                      <td class="text-center align-middle">
                        <a class="add" style="color: #27C46B" title="Tải tệp tin" data-toggle="tooltip"
                          (click)="downloadFile(TkForm.listHDDtlFileVM[i].id, TkForm.listHDDtlFileVM[i].fileName)">
                          <i class="material-icons align-middle">file_download</i></a>&nbsp;&nbsp;
                        <a class="delete" title="Xóa" data-toggle="tooltip" (click)="deleteRowFile(i)">
                          <i class="material-icons align-middle">&#xE872;</i></a>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <small for="uploadDocument">Tải tệp file không lớn hơn
                  <strong>100 MB</strong></small>
                <mat-chip-list #chipList>
                  <label class="input-group-text label-cus mt-1" for="inputGroupFile">Tải tập
                    tin</label>
                  <mat-chip style="background-color: #e3e5e6;" *ngFor="let file of lstUploadedFiles; let index = index"
                    [removable]="true" (removed)="removeFile(file.AttachmentName, index)">
                    {{file.AttachmentName}}
                    <mat-icon matChipRemove>cancel</mat-icon>
                  </mat-chip>
                  <input type="file" id="inputGroupFile" multiple #uploadFile (change)="handleFileInput($event)"
                    name="fileHoSo" formControlName="fileHoSo" [matChipInputFor]="chipList" class="form-control">
                </mat-chip-list>
              </div>
            </div>
          </div>

        </div>
      </div>
      <br>
      <div class="me-3 ms-3">  
        <h6>Thành phần tham dự</h6>
        <table class="table table-bordered table-striped"
          style="border: rgb(199, 199, 199) 1px; box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.25)" id="table-data">
          <thead>
            <tr>
              <th scope="col" class="text-center" style="width: 6%;"><span>STT</span></th>
              <th scope="col" class="text-center"><span>Họ và tên</span> </th>
              <th scope="col" class="text-center" style="width: 7%;"><span>Giới tính</span></th>
              <th scope="col" class="text-center"><span>Chức vụ</span></th>
              <th scope="col" class="text-center"><span>Cơ quan công tác</span></th>
              <th scope="col" class="text-center" style="width: 11%;"><span>Thao tác</span></th>
            </tr>
          </thead>
          <tbody formArrayName="JsonThanhPhanThamDu">
            <tr
              *ngFor="let item of controls; let i = index"
              [formGroupName]="i">
              <td class="text-center align-middle">{{controls.indexOf(item)+1}}</td>
              <td class="text-col">
                <input type="text" formControlName="hoTen" name="hoTen" class="form-control" style="padding: 0% !important;">
              </td>
              <td class="text-col">
                <select class="form-select" style="background-color: #fff; padding: 0% !important;" name="gioiTinh" formControlName="gioiTinh">
                  <option [value]=null selected>Chọn</option>
                  <option value="true">Nam</option>
                  <option value="false">Nữ</option>
                </select>
              </td>
              <td class="text-col">
                <input type="text" formControlName="chucVu" name="chucVu" class="form-control" style="padding: 0% !important;">
              </td>
              <td class="text-col">
                <input type="text" formControlName="coQuan" name="coQuan" class="form-control" style="padding: 0% !important;">
              </td>
              <td class="text-center align-middle">
                <a class="add" title="Thêm dòng" data-toggle="tooltip" (click)="addRowTable()"><i
                    class="material-icons">&#xE03B;</i></a>&nbsp;&nbsp;
                <a class="delete" title="Xóa" data-toggle="tooltip" (click)="deleteRowTable(i)"><i
                    class="material-icons">&#xE872;</i></a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- <div *ngIf="TkForm" class="me-3 ms-3">
        <div class="row">
          <div class="col-6">
            <h6><i>Tổng số : {{totalItems}}</i></h6>
          </div>
          <div class="col-4 d-flex justify-content-center">
            <ngb-pagination [collectionSize]="totalItems" [(page)]="page" [pageSize]="itemsPerPage" [maxSize]="5"
              [rotate]="true" [boundaryLinks]="true" (pageChange)="transition()"></ngb-pagination>
          </div>
          <div class="col-6 d-flex justify-content-end">
            <h6><i>Trang {{page}} / {{totalPage}}</i></h6>
          </div>
        </div>
      </div> -->
      <br>
      <div class="d-flex justify-content-end me-3 ms-3">
            <div [style.width.%]="96" style="text-align: right;">
              <button class="btn btn-primary jh-create-entity me-3 iconBG buttonborder"
                style="color: aliceblue; background-color: #1A4792; border-radius: 7px; width: 100px;">
                <fa-icon class="iconColor" icon="save"></fa-icon>&nbsp;<span>Lưu</span>
              </button>

              <button class="btn btn-primary jh-create-entity iconBG buttonborder"
                style="color: aliceblue; background-color: #1A4792; border-radius: 7px;"
                [routerLink]="['/ngoai-giao-doan']">
                <fa-icon class="iconColor" icon="arrow-left"></fa-icon>&nbsp;<span>Quay lại</span>
              </button>
            </div>
      </div>
    </form>
  </div>
  <br>


</div>

<app-alert></app-alert>